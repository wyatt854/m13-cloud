<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Cloud M13</title>
    <style>
        body { background: #000; color: #00ff41; font-family: 'Courier New', monospace; padding: 40px; line-height: 1.6; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 80vh; margin: 0; }
        .glitch { font-size: 24px; border-bottom: 2px solid #00ff41; padding-bottom: 15px; margin-bottom: 30px; letter-spacing: 2px; text-transform: uppercase; text-shadow: 2px 0px #ff0000; }
        #login-box { border: 1px solid #00ff41; padding: 30px; background: rgba(0, 255, 65, 0.05); text-align: center; box-shadow: 0 0 15px rgba(0, 255, 65, 0.2); }
        input { background: #000; border: 1px solid #00ff41; color: #00ff41; padding: 10px; font-family: 'Courier New', monospace; outline: none; margin-bottom: 10px; width: 200px; text-align: center; font-size: 16px; }
        button { background: #00ff41; color: #000; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; font-family: 'Courier New', monospace; text-transform: uppercase; }
        button:hover { background: #fff; box-shadow: 0 0 10px #fff; }
        #cloud-content { display: none; width: 100%; max-width: 900px; animation: fadeIn 1s; }
        #file-list { list-style: none; padding: 0; display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 15px; }
        .file-item { border: 1px solid rgba(0, 255, 65, 0.2); background: rgba(0, 255, 65, 0.02); padding: 12px; transition: 0.3s; display: flex; align-items: center; overflow: hidden; }
        .file-item:hover { border: 1px solid #00ff41; background: rgba(0, 255, 65, 0.1); transform: translateY(-2px); }
        .file-icon { margin-right: 12px; font-weight: bold; min-width: 60px; }
        a { color: #fff; text-decoration: none; font-size: 14px; text-overflow: ellipsis; white-space: nowrap; overflow: hidden; display: block; }
        a:hover { color: #00ff41; }
        .error { color: #ff0000; margin-top: 15px; font-size: 13px; font-weight: bold; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

    <div class="glitch">Bienvenue dans le cloud !</div>

    <div id="login-box">
        <p>> ENTRER CLÉ D'ACCÈS SYSTÈME :</p>
        <input type="password" id="pass-input" placeholder="CODE" onkeypress="handleKeyPress(event)">
        <br>
        <button onclick="verifyAccess()">DÉCRYPTER</button>
        <div id="error-msg" class="error"></div>
    </div>

    <div id="cloud-content">
        <div id="status" style="font-style: italic; margin-bottom: 20px; color: #00ff41;">> RÉCUPÉRATION DES DONNÉES RÉUSSIE.</div>
        <ul id="file-list"></ul>
    </div>

    <script>
        function verifyAccess() {
            const input = document.getElementById('pass-input').value;
            if (input.trim().toUpperCase() === "M13S") {
                document.getElementById('login-box').style.display = 'none';
                document.getElementById('cloud-content').style.display = 'block';
                fetchM13Archives();
            } else {
                document.getElementById('error-msg').innerText = "!! ERREUR : CLÉ D'ACCÈS INVALIDE !!";
            }
        }

        function handleKeyPress(e) { if (e.key === 'Enter') verifyAccess(); }

        async function fetchM13Archives() {
            const username = 'wyatt854';
            const repo = 'm13-cloud';
            const listElement = document.getElementById('file-list');
            
            // Extensions autorisées (on exclut .html, .js, .css, .json, etc.)
            const allowedExtensions = ['pdf', 'jpg', 'jpeg', 'png', 'gif', 'exe', 'zip', 'rar', 'mp4', 'mp3', 'txt'];

            try {
                const response = await fetch(`https://api.github.com/repos/${username}/${repo}/contents/`);
                const files = await response.json();
                listElement.innerHTML = ""; 

                files.forEach(file => {
                    const ext = file.name.split('.').pop().toLowerCase();
                    
                    if (allowedExtensions.includes(ext)) {
                        const li = document.createElement('li');
                        li.className = 'file-item';
                        
                        let icon = `[${ext.toUpperCase()}]`;
                        if (['jpg','jpeg','png','gif'].includes(ext)) icon = "[IMG]";
                        if (ext === 'exe') icon = "[EXEC]";
                        
                        const a = document.createElement('a');
                        a.href = `./${file.name}`; 
                        a.target = "_blank";
                        a.innerHTML = `<span class="file-icon">${icon}</span> ${file.name.toUpperCase()}`;
                        
                        li.appendChild(a);
                        listElement.appendChild(li);
                    }
                });
            } catch (error) {
                console.error("Erreur M13:", error);
            }
        }
    </script>
</body>
</html>
